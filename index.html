<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="style.min.css" />
        <title>Scroll Snap Example</title>
    </head>
    <body>
        <div class="container">
            <article class="article"></article>
        </div>
        <script type="module">
            import { unified } from "https://esm.sh/unified@11?bundle";
            import remarkParse from "https://esm.sh/remark-parse@11?bundle";
            import remarkRehype from "https://esm.sh/remark-rehype@11?bundle";
            import rehypeStringify from "https://esm.sh/rehype-stringify@10?bundle";
            import grayMatter from "https://esm.sh/gray-matter@4.0.3";

            import remarkGfm from "https://esm.sh/remark-gfm@4.0.1";
            import rehypeShiki from "https://esm.sh/@shikijs/rehype@3.4.2";

            async function parseMarkdown({
                remarkParseOptions,
                remarkPlugins = [],
                remarkRehypeOptions,
                rehypePlugins = [],
                source = "",
                onError = () => {},
            }) {
                const { content, data: frontmatter } = grayMatter(source);
                const file = await unified()
                    .use(remarkParse, remarkParseOptions)
                    .use(remarkPlugins)
                    .use(remarkRehype, remarkRehypeOptions)
                    .use(rehypePlugins)
                    .use(rehypeStringify)
                    .process(content);
                return file;
            }
            async function main() {
                const response = await fetch("markdowns/vue3_composition_api_guide.md");
                const data = await response.blob();
                const source = await data.text();
                const result = await parseMarkdown({
                    remarkPlugins: [remarkGfm],
                    rehypePlugins: [
                        [
                            rehypeShiki,
                            {
                                theme: "one-light",
                                langs: [
                                    "javascript",
                                    "typescript",
                                    "css",
                                    "html",
                                    "json",
                                    "markdown",
                                    "scss",
                                    "jsx",
                                    "tsx",
                                    "vue",
                                ],
                            },
                        ],
                    ],
                    source,
                });
                const article = document.querySelector(".article");
                article.innerHTML = result.value;
            }
            main();
        </script>
    </body>
</html>
